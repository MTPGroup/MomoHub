---
title: 插件
description: 插件系统 API
navigation:
  icon: i-lucide-puzzle
---

::warning
插件系统目前处于开发阶段，接口和功能可能会有较大变动
::

## 获取已通过审核的插件列表

::endpoint{method="GET" path="/plugins"}
获取所有已通过审核的插件，按点赞数和更新时间排序，支持分页。
::

**查询参数：**

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
      "name": "Web Search",
      "description": "在线搜索插件，支持实时网络信息检索",
      "version": "1.0.0",
      "schema": {
        "name": "web_search",
        "description": "Search the web for real-time information",
        "parameters": {
          "type": "object",
          "properties": {
            "query": { "type": "string" }
          }
        }
      },
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "status": "APPROVED",
      "likeCount": 42,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

---

## 搜索插件

::endpoint{method="GET" path="/plugins/search"}
按名称或描述模糊搜索已通过审核的插件。
::

**查询参数：**

::field{name="q" type="string"}
搜索关键词
::

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
      "name": "Web Search",
      "description": "在线搜索插件，支持实时网络信息检索",
      "version": "1.0.0",
      "schema": {
        "name": "web_search",
        "description": "Search the web for real-time information",
        "parameters": {
          "type": "object",
          "properties": {
            "query": { "type": "string" }
          }
        }
      },
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "status": "APPROVED",
      "likeCount": 42,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

---

## 获取插件详情

::endpoint{method="GET" path="/plugins/{pluginId}"}
获取指定插件的详细信息，包括源代码。
::

**响应数据：**

```json
{
  "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
  "name": "Web Search",
  "description": "在线搜索插件，支持实时网络信息检索",
  "version": "1.0.0",
  "schema": {
    "name": "web_search",
    "description": "Search the web for real-time information",
    "parameters": {
      "type": "object",
      "properties": {
        "query": { "type": "string" }
      }
    }
  },
  "code": "export default async function(params) { ... }",
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "status": "APPROVED",
  "likeCount": 42,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-15T08:30:00Z"
}
```

> 与列表接口相比，详情接口会额外返回 `code` 字段，包含插件的完整源代码。

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 404 | 插件不存在 |

---

## 创建插件

::endpoint{method="POST" path="/plugins" auth}
创建新插件，状态为待审核。
::

**请求参数：**

::field{name="name" type="string" required}
插件名称
::

::field{name="description" type="string" required}
插件描述
::

::field{name="version" type="string" required}
版本号
::

::field{name="schema" type="object" required}
插件 schema，包含 `name`、`description`、`parameters`
::

::field{name="code" type="string" required}
插件源代码
::

**响应数据：**

```json
{
  "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
  "name": "Web Search",
  "description": "在线搜索插件，支持实时网络信息检索",
  "version": "1.0.0",
  "schema": {
    "name": "web_search",
    "description": "Search the web for real-time information",
    "parameters": {
      "type": "object",
      "properties": {
        "query": { "type": "string" }
      }
    }
  },
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "status": "PENDING",
  "likeCount": 0,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-01T00:00:00Z"
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 创建成功 |
| 401 | 未登录或令牌无效 |

---

## 更新插件

::endpoint{method="PUT" path="/plugins/{pluginId}" auth}
更新指定插件的信息，仅作者可操作。
::

**请求参数：**

::field{name="name" type="string" required}
插件名称
::

::field{name="description" type="string" required}
插件描述
::

::field{name="version" type="string" required}
版本号
::

::field{name="schema" type="object" required}
插件 schema
::

::field{name="code" type="string" required}
插件源代码
::

**响应数据：**

```json
{
  "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
  "name": "Web Search",
  "description": "在线搜索插件，支持实时网络信息检索（已更新）",
  "version": "1.1.0",
  "schema": {
    "name": "web_search",
    "description": "Search the web for real-time information",
    "parameters": {
      "type": "object",
      "properties": {
        "query": { "type": "string" }
      }
    }
  },
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "status": "APPROVED",
  "likeCount": 42,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-20T10:00:00Z"
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 更新成功 |
| 401 | 未登录或令牌无效 |
| 403 | 无权操作 |
| 404 | 插件不存在 |

---

## 删除插件

::endpoint{method="DELETE" path="/plugins/{pluginId}" auth}
删除指定插件，仅作者可操作。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 204 | 删除成功 |
| 401 | 未登录或令牌无效 |
| 403 | 无权操作 |
| 404 | 插件不存在 |

---

## 获取我的插件

::endpoint{method="GET" path="/me/plugins" auth}
获取当前用户创建的所有插件，支持分页。
::

**查询参数：**

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
      "name": "Web Search",
      "description": "在线搜索插件，支持实时网络信息检索",
      "version": "1.0.0",
      "schema": {
        "name": "web_search",
        "description": "Search the web for real-time information",
        "parameters": {
          "type": "object",
          "properties": {
            "query": { "type": "string" }
          }
        }
      },
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "status": "APPROVED",
      "likeCount": 42,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 401 | 未登录或令牌无效 |

---

## 点赞插件

::endpoint{method="POST" path="/plugins/{pluginId}/like" auth}
为指定插件点赞。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 点赞成功 |
| 401 | 未登录或令牌无效 |
| 404 | 插件不存在 |
| 409 | 已经点赞过 |

---

## 取消点赞

::endpoint{method="DELETE" path="/plugins/{pluginId}/like" auth}
取消对指定插件的点赞。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 204 | 取消成功 |
| 401 | 未登录或令牌无效 |
| 404 | 点赞记录不存在 |

---

## 审批通过插件

::endpoint{method="POST" path="/plugins/{pluginId}/approve" auth}
将指定插件状态设为已通过（需要管理员权限）。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 审批成功 |
| 401 | 未登录或令牌无效 |
| 403 | 需要管理员权限 |
| 404 | 插件不存在 |

---

## 审批拒绝插件

::endpoint{method="POST" path="/plugins/{pluginId}/reject" auth}
将指定插件状态设为已拒绝（需要管理员权限）。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 审批成功 |
| 401 | 未登录或令牌无效 |
| 403 | 需要管理员权限 |
| 404 | 插件不存在 |

---

## 获取待审核插件列表

::endpoint{method="GET" path="/admin/plugins/pending" auth}
获取所有待审核的插件列表（需要管理员权限）。
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "a7b8c9d0-e1f2-3456-0123-567890123456",
      "name": "Weather Query",
      "description": "天气查询插件，获取全球实时天气信息",
      "version": "1.0.0",
      "schema": {
        "name": "weather_query",
        "description": "Query weather information by city",
        "parameters": {
          "type": "object",
          "properties": {
            "city": { "type": "string" }
          }
        }
      },
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "status": "PENDING",
      "likeCount": 0,
      "createdAt": "2026-01-20T10:00:00Z",
      "updatedAt": "2026-01-20T10:00:00Z"
    }
  ],
  "total": 1,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 401 | 未登录或令牌无效 |
| 403 | 需要管理员权限 |
