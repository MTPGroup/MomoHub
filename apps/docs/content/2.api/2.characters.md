---
title: AI 角色
description: AI 角色管理 API
navigation:
  icon: i-lucide-bot
---

## 获取公开角色列表

::endpoint{method="GET" path="/characters/public"}
获取所有公开角色，支持分页。
::

**查询参数：**

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "name": "白洲梓",
      "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
      "bio": "Vanitas Vanitatum Et Omnia Vanitas",
      "originPrompt": "",
      "isPublic": true,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 42,
  "page": 1,
  "limit": 20,
  "totalPages": 3,
  "hasNext": true,
  "hasPrevious": false
}
```

---

## 搜索角色

::endpoint{method="GET" path="/characters/search" auth}
按名称搜索角色，返回公开角色及自己的私有角色。
::

**查询参数：**

::field{name="q" type="string"}
搜索关键词
::

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "name": "白洲梓",
      "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
      "bio": "Vanitas Vanitatum Et Omnia Vanitas",
      "originPrompt": "",
      "isPublic": true,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 5,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 搜索成功 |
| 401 | 未登录或令牌无效 |

---

## 获取我的角色列表

::endpoint{method="GET" path="/characters" auth}
获取当前登录用户创建的所有角色，支持分页。
::

**查询参数：**

::field{name="page" type="string"}
页码，从 1 开始
::

::field{name="limit" type="string"}
每页数量，1-100
::

**响应数据：**

```json
{
  "items": [
    {
      "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
      "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
      "name": "白洲梓",
      "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
      "bio": "Vanitas Vanitatum Et Omnia Vanitas",
      "originPrompt": "",
      "isPublic": true,
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-01-15T08:30:00Z"
    }
  ],
  "total": 3,
  "page": 1,
  "limit": 20,
  "totalPages": 1,
  "hasNext": false,
  "hasPrevious": false
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 401 | 未登录或令牌无效 |

---

## 获取角色详情

::endpoint{method="GET" path="/characters/{characterId}"}
获取指定角色的详细信息。公开角色无需认证，私有角色需要是作者。
::

**响应数据：**

```json
{
  "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "name": "白洲梓",
  "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
  "bio": "Vanitas Vanitatum Et Omnia Vanitas",
  "originPrompt": "",
  "isPublic": true,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-15T08:30:00Z"
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 创建角色

::endpoint{method="POST" path="/characters" auth}
创建一个新的 AI 角色。
::

**请求参数：**

::field{name="name" type="string" required}
角色名称
::

::field{name="avatar" type="string"}
头像 URL
::

::field{name="bio" type="string"}
角色简介
::

::field{name="originPrompt" type="string"}
角色系统提示词
::

::field{name="isPublic" type="boolean"}
是否公开，默认 `false`
::

**响应数据：**

```json
{
  "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "name": "白洲梓",
  "avatar": null,
  "bio": "Vanitas Vanitatum Et Omnia Vanitas",
  "originPrompt": "",
  "isPublic": true,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-01T00:00:00Z"
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 201 | 创建成功 |
| 400 | 输入参数无效 |
| 401 | 未登录或令牌无效 |

---

## 更新角色

::endpoint{method="PUT" path="/characters/{characterId}" auth}
更新指定角色的信息，需要是角色的作者。
::

**请求参数：**

::field{name="name" type="string" required}
角色名称
::

::field{name="avatar" type="string"}
头像 URL
::

::field{name="bio" type="string"}
角色简介
::

::field{name="originPrompt" type="string"}
角色系统提示词
::

::field{name="isPublic" type="boolean"}
是否公开
::

**响应数据：**

```json
{
  "id": "967217c8-4e26-4404-bcc4-03e084b5d6f9",
  "authorId": "8ebc8550-6d4b-4dd0-967b-3e1367a4abf1",
  "name": "白洲梓",
  "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
  "bio": "Vanitas Vanitatum Et Omnia Vanitas",
  "originPrompt": "",
  "isPublic": true,
  "createdAt": "2026-01-01T00:00:00Z",
  "updatedAt": "2026-01-20T10:00:00Z"
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 更新成功 |
| 400 | 输入参数无效 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 删除角色

::endpoint{method="DELETE" path="/characters/{characterId}" auth}
永久删除指定角色，需要是角色的作者。此操作不可撤销。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 204 | 删除成功 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 上传角色头像

::endpoint{method="PUT" path="/characters/{characterId}/avatar" auth}
通过 `multipart/form-data` 上传角色头像，需要是角色的作者。
::

**请求参数：**

::field{name="file" type="binary" required}
头像图片文件
::

**响应数据：**

```json
{
  "avatar": "https://cdn-momohub.hanasaki.tech/avatars/967217c8-4e26-4404-bcc4-03e084b5d6f9.png",
}
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 上传成功 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 链接知识库到角色

::endpoint{method="POST" path="/characters/{characterId}/knowledge-bases" auth}
将指定知识库关联到角色，需要是角色的作者。
::

**请求参数：**

::field{name="knowledgeBaseId" type="string" required}
知识库 ID（UUID 格式）
::

::field{name="priority" type="integer"}
优先级
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 关联成功 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 获取角色关联的知识库列表

::endpoint{method="GET" path="/characters/{characterId}/knowledge-bases"}
获取指定角色订阅的所有知识库列表。
::

**响应数据：**

```json
[
  {
    "knowledgeBaseId": "660e8400-e29b-41d4-a716-446655440000",
    "priority": 1
  },
  {
    "knowledgeBaseId": "770e8400-e29b-41d4-a716-446655440000",
    "priority": 2
  }
]
```

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 200 | 获取成功 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |

---

## 解除角色与知识库的链接

::endpoint{method="DELETE" path="/characters/{characterId}/knowledge-bases/{knowledgeBaseId}" auth}
移除角色与指定知识库的关联关系，需要是角色的作者。
::

**响应状态码：**

| 状态码 | 说明 |
| --- | --- |
| 204 | 解除关联成功 |
| 401 | 未登录或令牌无效 |
| 403 | 权限不足 |
| 404 | 角色不存在 |
