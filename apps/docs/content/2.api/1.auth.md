---
title: Auth
description: 用户认证相关 API
navigation:
  icon: i-lucide-key-round
---

## 注册

::endpoint{method="POST" path="/auth/sign-up/email"}
通过邮箱注册新用户。
::

**请求参数：**

::field{name="email" type="string" required}
用户邮箱地址
::

::field{name="name" type="string" required}
用户名
::

::field{name="password" type="string" required}
用户密码
::

**请求示例：**

```bash
curl -X POST https://api.momohub.com/v1/auth/sign-up/email \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "name": "Alice",
    "password": "securepassword123"
  }'
```

---

## 邮箱登录

::endpoint{method="POST" path="/auth/sign-in/email"}
使用邮箱和密码登录，返回用户信息和 Token。
::

**请求参数：**

::field{name="email" type="string" required}
用户邮箱地址
::

::field{name="password" type="string" required}
用户密码
::

**响应数据：**

```json
{
  "user": {
    "userId": "usr_abc123",
    "email": "user@example.com",
    "username": "Alice",
    "avatar": null,
    "isEmailVerified": true,
    "createdAt": "2025-01-01T00:00:00Z",
    "updatedAt": "2025-01-01T00:00:00Z"
  },
  "tokens": {
    "accessToken": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
    "accessTokenExpiredIn": 3600,
    "refreshTokenExpiredIn": 604800,
    "tokenType": "Bearer"
  }
}
```

---

## 刷新 Token

::endpoint{method="POST" path="/auth/refresh"}
使用 Refresh Token 刷新 Access Token。
::

**请求参数：**

::field{name="refreshToken" type="string" required}
当前有效的 Refresh Token
::

---

## 发送 OTP

::endpoint{method="POST" path="/auth/email-otp/send"}
发送一次性验证码到用户邮箱。
::

**请求参数：**

::field{name="email" type="string" required}
目标邮箱地址
::

::field{name="type" type="string" required}
OTP 类型：`reset_password`、`verify_email`、`sign_in`
::

---

## 验证邮箱

::endpoint{method="POST" path="/auth/email-otp/verify-email"}
使用 OTP 验证用户邮箱。
::

**请求参数：**

::field{name="email" type="string" required}
用户邮箱地址
::

::field{name="otp" type="string" required}
收到的验证码
::

---

## 重置密码

::endpoint{method="POST" path="/auth/password/reset"}
通过 OTP 验证码重置密码。
::

**请求参数：**

::field{name="email" type="string" required}
用户邮箱地址
::

::field{name="otp" type="string" required}
验证码
::

::field{name="password" type="string" required}
新密码
::

---

## 获取当前用户

::endpoint{method="GET" path="/auth/me" auth}
获取当前登录用户的个人信息。
::

**响应数据：**

```json
{
  "userId": "usr_abc123",
  "email": "user@example.com",
  "username": "Alice",
  "avatar": "https://cdn.momohub.com/avatars/abc.jpg",
  "isEmailVerified": true,
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-15T08:30:00Z"
}
```

---

## 更新个人信息

::endpoint{method="PUT" path="/auth/me" auth}
更新当前用户的个人信息。
::

**请求参数：**

::field{name="username" type="string"}
新的用户名（可选）
::

---

## 上传头像

::endpoint{method="PUT" path="/auth/me/avatar" auth}
上传或更新用户头像。使用 `multipart/form-data` 格式。
::

```bash
curl -X PUT https://api.momohub.com/v1/auth/me/avatar \
  -H "Authorization: Bearer <token>" \
  -F "file=@avatar.jpg"
```

---

## 修改密码

::endpoint{method="POST" path="/auth/password/change" auth}
修改当前用户的密码。
::

**请求参数：**

::field{name="oldPassword" type="string" required}
当前密码
::

::field{name="newPassword" type="string" required}
新密码
::
